{% extends 'base.html' %}
{% block title %}ì—¬í–‰ ìê¸ˆ ê³„íš{% endblock %}

{% block content %}
<style>
  :root {
    --moa-green: #00d8b0;
    --moa-lightgreen: #b2f5ea;
    --moa-dark: #020715;
  }

  .section-title {
    color: var(--moa-dark);
    border-bottom: 3px solid var(--moa-green);
    padding-bottom: 16px;
    margin-bottom: 40px;
  }

  .result-box {
    background: #f8fffd;
    border: 2px solid var(--moa-lightgreen);
    border-radius: 15px;
    padding: 30px;
    margin-bottom: 40px;
  }

  .result-box p {
    font-size: 1.1rem;
    margin-bottom: 12px;
  }

  .saving-amount {
    font-weight: bold;
    color: #00bfa5;
    font-size: 1.3rem;
  }

  .list-group-item {
    border-radius: 15px;
    border: 1px solid #e0e0e0;
    margin-bottom: 12px;
    background-color: #ffffff;
  }

  .list-group-item strong {
    color: var(--moa-dark);
  }

  .travel-detail {
    background-color: #ffffff;
    border: 2px solid #e0f7f3;
    border-radius: 15px;
    padding: 25px;
    margin-bottom: 40px;
  }

  .travel-detail h5 {
    font-weight: bold;
    color: #111;
    margin-bottom: 20px;
  }

  .travel-detail ul {
    padding-left: 20px;
  }

  .travel-detail li {
    margin-bottom: 8px;
  }
</style>

<div class="container my-5">
  <h1 class="text-center fw-bold section-title">âœˆï¸ {{ city }} ì—¬í–‰ ê³„íš</h1>

  <div class="travel-detail">
    <h5>ğŸ“ ì—¬í–‰ ìƒì„¸ ì •ë³´</h5>
    <ul>
      <li>ğŸŒ êµ­ê°€: {{ country }}</li>
      <li>ğŸ“ í…Œë§ˆ: {{ theme }}</li>
      <li>ğŸ’¡ ì¶”ì²œ ì´ìœ : {{ reason }}</li>
      <li>â° ì¶”ì²œ ì¼ì •: {{ days }}</li>
      <li>ğŸ›« í•­ê³µë£Œ: {{ airfare | int | format_currency('â‚©') }}</li>
      <li>ğŸ¨ ìˆ™ë°•ë¹„: {{ accommodation | int | format_currency('â‚©') }}</li>
      <li>ğŸ½ ì‹ë¹„: {{ food | int | format_currency('â‚©') }}</li>
    </ul>
  </div>

  <div class="result-box text-center">
    <p>ì´ í•„ìš” ê¸ˆì•¡: <span class="saving-amount">{{ total_cost | int | format_currency('â‚©') }}</span></p>
    <p>ì €ì¶• ê¸°ê°„: <strong>{{ months }}ê°œì›”</strong></p>
    <p>ì›” ì €ì¶• ê¸ˆì•¡: <span class="saving-amount">{{ monthly_saving | int | format_currency('â‚©') }}</span></p>
  </div>

  <h4 class="mb-3 fw-bold">ì¶”ì²œ ì ê¸ˆ ìƒí’ˆ</h4>
  <ul class="list-group">
    {% for p in products %}
    {% set period = p['ì €ì¶•ê¸°ê°„(ê°œì›”)'] | int %}
    {% set monthly = (total_cost // period) %}
    {% set rate = (p['ìµœê³ ìš°ëŒ€ê¸ˆë¦¬(%)'] | float) %}
    {% set total_with_interest = monthly * period * (1 + rate / 100) %}
    <li class="list-group-item">
      <strong>{{ p['ê¸ˆìœµíšŒì‚¬ëª…'] }}</strong> - {{ p['ìƒí’ˆëª…'] }}<br>
      ê¸ˆë¦¬: ê¸°ë³¸ {{ p['ê¸°ë³¸ê¸ˆë¦¬(%)'] }}%, ìµœê³ ìš°ëŒ€ {{ p['ìµœê³ ìš°ëŒ€ê¸ˆë¦¬(%)'] }}%<br>
      ì €ì¶• ê¸°ê°„: {{ period }}ê°œì›”<br>
      ğŸ’¸ ì›” ì €ì¶• ê¸ˆì•¡: <strong>{{ monthly | format_currency('â‚©') }}</strong><br>
      ğŸ’° ë§Œê¸° ìˆ˜ë ¹ ì˜ˆìƒ ê¸ˆì•¡ (ë‹¨ë¦¬): <strong>{{ total_with_interest | int | format_currency('â‚©') }}</strong>
    </li>
    {% endfor %}
  </ul>
</div>
{% endblock %}
